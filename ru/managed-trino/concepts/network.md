---
title: Сеть в {{ mtr-full-name }}
description: В тексте указаны особенности работы сети в {{ mtr-full-name }} и описаны возможности для ее настройки.
---

# Сеть в {{ mtr-name }}

При создании кластера вы можете задать следующие сетевые настройки:

* [Сеть и подсеть](../../vpc/concepts/network.md) в ее пределах.

   Для подсети действуют определенные [требования](#subnet-requirements), так как кластер выделяет специальные [IP-адреса](#addresses).

* [Группы безопасности](#security-groups) для разрешения только определенного исходящего трафика.

## IP-адреса кластера {#addresses}

Кластер {{ mtr-name }} выделяет специальные IP-адреса в своей подсети. С них кластер подключается к другим ресурсам {{ yandex-cloud }}. Вы можете добавить [каталог](../concepts/index.md#catalog) и настроить его на подключение к ресурсам в вашем облаке, которые поддерживаются [коннекторами](../concepts/index.md#connector) {{ mtr-name }}.

По умолчанию IP-адреса кластера работают только во внутренней сети. Если нужно предоставить кластеру доступ к ресурсам в интернете, [настройте NAT-шлюз](../../vpc/operations/create-nat-gateway.md).

IP-адреса кластера {{ mtr-name }} распределяются динамически и могут быть изменены, например при техническом обслуживании. Поэтому при необходимости определить адреса кластера используйте диапазоны подсетей вместо конкретных адресов. Например, если вы используете [{{ interconnect-full-name }}](../../interconnect/concepts/index.md) для подключения кластера {{ mtr-name }} к вашей собственной (on-premise) инфраструктуре, то в настройках межсетевого экрана лучше добавить в исключения весь диапазон подсети. 

## Требования к подсетям кластера {#subnet-requirements}

Для подсети кластера {{ mtr-name }} должны выполняться следующие условия:

* Диапазон IP-адресов кластера не пересекается со служебным диапазоном IP-адресов {{ trino-service-address }}, через который {{ yandex-cloud }} управляет компонентами кластера {{ mtr-name }}.

    Если условие не выполняется, при создании кластера возникнет ошибка.

    Требование относится в том числе к сетям в вашей собственной (on-premise) инфраструктуре, если она подключена к кластеру {{ mtr-name }} через [{{ interconnect-full-name }}](../../interconnect/concepts/index.md). Из кластера {{ TR }} не получится установить подключение к ресурсам с IP-адресами из диапазона {{ trino-service-address }}.

* Диапазон подсети включает не менее `2 × N` свободных IP-адресов, где `N` — это суммарное количество экземпляров всех компонентов кластера {{ mtr-name }}. Допустим, кластер состоит из координатора и четырех воркеров. Тогда `N = 5`, и в подсети должно быть не меньше десяти свободных адресов.

    Если вы настроили автоматическое изменение количества воркеров, используйте при расчетах максимально возможное количество воркеров в кластере.

## Группы безопасности {#security-groups}

[Группы безопасности](../../vpc/concepts/security-groups.md) не ограничивают входящий трафик кластера {{ mtr-name }} и не влияют на доступность веб-интерфейса {{ TR }}. Настраивать правила для входящего трафика не нужно.

Вы можете использовать группы безопасности, чтобы задавать правила для исходящего трафика, например при настройке нового [каталога](../concepts/index.md#catalog).

{% note tip %}

Перед подключением из кластера {{ mtr-name }} к другому ресурсу {{ yandex-cloud }} убедитесь, что группы безопасности этого ресурса разрешают такое подключение.

{% endnote %}

Если вы не назначили кластеру {{ mtr-name }} ни одной группы безопасности, ему автоматически назначается группа, используемая по умолчанию.
