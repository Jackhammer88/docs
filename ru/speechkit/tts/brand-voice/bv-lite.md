# Подготовка и загрузка данных для {{ brand-voice-lite-name }}

{{ brand-voice-lite-name }} позволяет создать свой уникальный голос, загрузив минимум размеченных аудиозаписей. В результате вы получите URI дообученной модели, к которой сможете обращаться из своих приложений через API.


## Какие данные нужны для обучения {#results}

Чтобы создать свой голос {{ brand-voice-lite-name }}, необходимо подготовить и загрузить данные для обучения — записи аудио и соответствующие им тексты. Объем данных, необходимых для обучения модели, зависит от целей использования создаваемого голоса и особенностей дикции диктора. Так, голос для озвучки художественной литературы потребует больше данных, чем голос для голосового робота.

Минимальный объем необходимых данных — 20 минут, рекомендуемый — 40 минут, хороший — час и более. Для обучения модели нескольким амплуа понадобится создать датасет для каждого, указав его название в параметрах.

Данные для обучения загружаются одним ZIP-архивом, содержащим:

1. Аудиозаписи в формате WAV.
1. Таблицу в формате [TSV](https://ru.wikipedia.org/wiki/TSV) в кодировке UTF-8, содержащей текстовые расшифровки аудиозаписей из архива. Таблица должна состоять из двух колонок без заголовков:
   * имя файла с аудиозаписью, на которой диктор произносит текст;
   * строка, содержащая дословную расшифровку аудиозаписи.

{% note warning %}

В каждой аудиозаписи должна быть полностью произнесенная фраза из одного или нескольких предложений длительностью не более 15 секунд. Текстовая расшифровка в таблице должна полностью совпадать с текстом на аудиозаписи.

{% endnote %}

В каждой аудиозаписи в начале и в конце должны присутствовать интервалы тишины, обрезанные звуки и слова недопустимы. Нельзя взять аудиозапись подкаста и нарезать ее на отрезки по 15 секунд: в этом случае границы аудиозаписей будут попадать на середину слова или фразы и не будут соответствовать логическим фразам. Обучить качественную модель на таких данных не получится.

> Пример правильно подготовленной аудиозаписи: в начале и в конце аудио есть несколько миллисекунд тишины, фраза произнесена полностью.

![good-audio](../../../_assets/speechkit/good-audio.png)

> Пример плохой аудиозаписи: в начале и в конце аудио нет интервалов тишины, начало и конец фразы обрезаны.

![bad-audio](../../../_assets/speechkit/bad-audio.png)

Такие аудиозаписи будут иметь искажения и не подойдут для обучения модели.

### Пример подготовленных данных {#example}

Перед загрузкой данных для создания голоса запакуйте все  _аудиофайлы_ (1.wav, 2.wav, 3.wav) и _таблица в формате TSV_, соотносящая аудиофайлы и их расшифровки, в ZIP-архив.

   Заголовок таблицы приведен для наглядности, в файле для загрузки он должен отсутствовать.

   | recordings | text |
   |---|---|
   | 1.wav | Книги собирают жемчужины человеческой мысли и передают их потомству. |
   | 2.wav | Мы предлагаем вам замечательную книгу! |
   | 3.wav | Книга рекомендована школьникам от пяти лет. |

## Подготовьте данные {#prepare-dataset}

### Тексты для обучения {#texts}

Как минимум 30% обучающих данных должны содержать вопросы, чтобы обученный голос мог синтезировать вопросительную интонацию в тексте.

Вы можете использовать для обучения тексты, подготовленные командой {{ speechkit-name }}, или создать их самостоятельно. Если вы используете [пример](https://storage.yandexcloud.net/doc-files/ml/brand_voice_lite_text_example.tsv) от команды {{ speechkit-name }}, в начало каждой строки добавьте название файла с соответствующей аудиозаписью и удалите строку с заголовком таблицы.

#### Требования ко всем текстам {#text-technical-requirements}

{% note tip %}

Результат обучения голосовой модели {{ brand-voice-lite-name }} напрямую зависит от обучающих данных. Выполняйте приведенные требования и рекомендации к текстам, чтобы получить качественный голос {{ brand-voice-lite-name }}.

{% endnote %}

* Текст в расшифровке должен полностью совпадать с озвученным в аудио.
* Рекомендуемая длина фразы — не более {{ tts-v3-count }}.
* Все фразы должны быть полными, без обрывов на полуслове.
  > "..ть Время! Разве такое ему может понравиться! Если б ты с ним не ссорилась, могла бы просить у него все, что хо."

* Тексты не должны содержать грамматических ошибок.

{% include [text requirements](../../../_includes/speechkit/tts-text-requirements.md) %}

## Запишите аудиофайлы {#record-audio}

### Общие рекомендации для записи аудио {#audiotips}

{% include notitle [tips](../../../_includes/speechkit/audio-tips.md) %}

### Требования к аудиозаписям {#requirements-audio}

| Требование | Значение |
| --- | --- |
| Частота дискретизации | 48 кГц |
| Глубина аудио (audio bit depth) |  16 бит PCM |
| Количество каналов |  1 (моно) |
| Формат | [WAV](https://ru.wikipedia.org/wiki/WAV) |
| Продолжительность | ≤15 секунд |
| Тишина в начале и в конце | 100–200 миллисекунд |

Сохраните все аудиозаписи в ZIP-архив для загрузки вместе с таблицой с текстами в формате TSV.

## Загрузите данные {#upload}

Текстовые данные и аудиофайлы загружаются архивом через интерфейс в [консоли управления]({{ link-console-main }}/link/speechkit/brand-voice).
