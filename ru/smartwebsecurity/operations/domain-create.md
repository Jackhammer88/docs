---
title: Как добавить домен в {{ sws-full-name }}
description: Следуя данной инструкции, вы сможете добавить свой домен для защиты в {{ sws-full-name }}.
---

# Добавить домен

Для добавления домена вам потребуется:

* Адрес домена, на котором работает веб-приложение. У вас должен быть доступ к кабинету управления доменом, чтобы изменить А-запись.
* (для HTTPS) Действительный приватный ключ и TLS-сертификат для этого домена в [PEM](https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail)-encoded формате. Поддерживаются сертификаты с ключами RSA-2048 и RSA-4096.
* (Опционально) Действительный приватный ключ и TLS-сертификат для защиты соединения между прокси-сервером и сервером, на котором находится ваше веб-приложение.

{% list tabs group=instructions %}

- Консоль управления {#console}

  1. В [консоли управления]({{ link-console-main }}) выберите [каталог](../../resource-manager/concepts/resources-hierarchy.md#folder).
  1. В списке сервисов выберите **{{ ui-key.yacloud.iam.folder.dashboard.label_smartwebsecurity }}**.
  1. Откройте раздел **Защита доменов**.
  1. Выберите прокси-сервер, для которого нужно добавить домен.
  1. Нажмите кнопку **Добавить домен**.
  1. Введите адрес домена, на котором находится ваше веб-приложение.
   
     Вы можете добавить wildcard-домен, например `*.example.com`. В этом случае будут обрабатываться запросы ко всем поддоменам.

  1. (Опционально) Введите описание домена.
  1. Нажмите **Продолжить**.
  
  1. Укажите протокол соединения вашего веб-приложения с пользователями и дополнительные параметры:
  
      * **HTTPS и HTTP** — зашифрованное соединение HTTPS и поддержка HTTP для редких сценариев. Например, для переходного периода или поддержки старого оборудования.

         Включите опцию **Перенаправлять HTTP на HTTPS**, чтобы запросы, полученные по HTTP, отправлялись по HTTPS.

      * **HTTPS** — зашифрованное соединение HTTPS.
      * **HTTP** — незашифрованное соединение. Рекомендуем использовать только в тестовых целях. Для этого варианта не нужен сертификат, но трафик между пользователем и вашим приложением будет передаваться в открытом виде.
      * (Опционально) По умолчанию для протокола HTTP используется порт `80`, для HTTPS — порт `443` и версия HTTPS/2. Если в вашем веб-приложении другие настройки, откройте раздел **Настройки соединения** и укажите их.

  1. При использовании HTTPS добавьте сертификат из [{{ certificate-manager-name }}](../../certificate-manager/) или нажмите кнопку **Создать сертификат** и выберите:

       * **Пользовательский сертификат** — если у вашего веб-приложения уже есть TLS-сертификат.
  
          1. Введите произвольное имя сертификата и описание.
          1. (Опционально) Включите защиту от удаления, чтобы запретить удаление сертификата.
          1. Скопируйте или загрузите файлом приватный ключ, сертификат и цепочку промежуточных сертификатов в формате PEM.
          1. Нажмите кнопку **Создать сертификат**.

       * **Сертификат от Let’s Encrypt** — если у вашего веб-приложения нет TLS-сертификата.
         
          1. Введите произвольное имя сертификата и описание.
          1. (Опционально) Включите защиту от удаления, чтобы запретить удаление сертификата.
          1. Нажмите кнопку **Создать сертификат**.
          1. В интерфейсе будут указаны инструкции для подтверждения прав на домен. Выполните их.
          
             Дождитесь подтверждения домена. Обычно проверка выполняется несколько минут. Подробнее о [проверке прав на домены](../../certificate-manager/concepts/challenges.md#dns).
          1. Чтобы посмотреть статус проверки, нажмите **Показать логи**.
 
             После того как статус проверки прав изменится на `Valid`, сертификат будет выпущен и перейдет в статус `Issued`. Пока сертификат не выпущен, вы не сможете продолжить добавление домена.
  
  1. Нажмите кнопку **Продолжить**.
  
  1. Укажите настройки **Целевых ресурсов**:
     1. Введите IP-адрес сервера и порт, на котором работает ваше веб-приложение.
     1. (Опционально) Введите комментарий для сервера.
     1. (Опционально) Укажите параметры подключения к целевым ресурсам:
        * Чтобы трафик от прокси-сервера к вашему серверу направлялся по протоколу HTTPS, выберите этот протокол и добавьте сертификат.
        * Если вы используете несколько доменных имен и сертификатов, укажите [SNI](https://ru.wikipedia.org/wiki/Server_Name_Indication).
        * Выберите версию протокола — HTTP/2 или HTTP/1.1.
  1. Нажмите кнопку **Добавить домен**.

{% endlist %}

После добавления домена [создайте профиль безопасности](profile-create.md) и [подключите](host-connect.md) его к домену.

### См. также {#see-also}

* [{#T}](proxy-create.md)
* [{#T}](profile-create.md)
* [{#T}](host-connect.md)
