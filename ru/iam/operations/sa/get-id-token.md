---
title: Как создать ID-токен сервисного аккаунта
description: Следуя данной инструкции, вы сможете создать ID-токен для аутентификации сервисного аккаунта во внешней системе, поддерживающей аутентификацию по стандарту OIDC.
---

# Получение ID-токена сервисного аккаунта

Чтобы аутентифицироваться с помощью {{ iam-full-name }} во внешней системе, поддерживающей аутентификацию по стандарту [OIDC](https://openid.net/specs/openid-connect-core-1_0.html), необходим [ID-токен](../../concepts/authorization/id-token.md). ID-токен можно получить только для [сервисного аккаунта](../../concepts/users/service-accounts.md).

Чтобы получить ID-токен:

{% list tabs group=instructions %}

- CLI {#cli}

  {% include [cli-install](../../../_includes/cli-install.md) %}

  {% include [default-catalogue](../../../_includes/default-catalogue.md) %}

  1. Посмотрите описание команды создания ID-токена:

      ```bash
      yc iam create-id-token --help
      ```
  1. Получите идентификатор сервисного аккаунта, от имени которого вы хотите аутентифицироваться во внешней системе:

      ```bash
      yc iam service-account list
      ```

      Результат:

      ```
      +----------------------+--------------+--------+---------------------+-----------------------+
      |          ID          |     NAME     | LABELS |     CREATED AT      | LAST AUTHENTICATED AT |
      +----------------------+--------------+--------+---------------------+-----------------------+
      | ajeg2b2et02f******** | my-robot     |        | 2024-09-08 18:59:45 | 2025-02-18 10:10:00   |
      | ajegtlf2q28a******** | account-name |        | 2023-06-27 16:18:18 | 2025-02-18 10:20:00   |
      +----------------------+--------------+--------+---------------------+-----------------------+
      ```
  1. Получите ID-токен для нужного сервисного аккаунта:

      ```
      yc iam create-id-token \
        --subject-id <идентификатор_сервисного_акканта> \
        --audience <ресурс>
      ```

      Где:

      * `--subject-id` — [идентификатор](./get-id.md) сервисного аккаунта, для которого необходимо создать ID-токен.
      * `--audience` — ресурс, для которого будет предназначен получаемый токен. Необязательный параметр. Если значение параметра не задано, по умолчанию используется значение идентификатора сервисного аккаунта, заданного в параметре `subject-id`.

      В ответ команда выведет в стандартный поток вывода (`STDOUT`) [тело](../../concepts/authorization/id-token.md#token-format) созданного ID-токена сервисного аккаунта.

{% endlist %}