---
title: Пул зарезервированных ВМ {{ compute-full-name }}
description: Из статьи вы узнаете, что такое пул зарезервированных ВМ и как резервировать необходимые вычислительные ресурсы для создания ВМ нужных конфигураций в нужных зонах доступности.
---

# Пулы зарезервированных виртуальных машин

{% include [reserved-pools-pricing-warning](../../_includes/compute/reserved-pools-pricing-warning.md) %}

{% include [reserved-pools-preview-notice](../../_includes/compute/reserved-pools-preview-notice.md) %}

_Пул зарезервированных виртуальных машин_ — это зарезервированная пользователем в заданной [зоне доступности](../../overview/concepts/geo-scope.md) совокупность вычислительных ресурсов, которые будут гарантированно доступны пользователю для создания в этой зоне доступности [виртуальных машин](./vm.md) в определенной [конфигурации](./performance-levels#available-configurations).

Пул зарезервированных ВМ состоит из набора _слотов_ — совокупностей [вычислительных ресурсов](./vm.md#types) зоны доступности, минимально необходимых для запуска одной виртуальной машины в заданной для пула конфигурации. Размер пула зарезервированных ВМ — это количество слотов, входящих в пул. Вы можете [изменить](../operations/reserved-pools/update-reserved-pool.md) размер пула после его создания.

Слоты пула могут быть либо свободны, либо заняты запущенными виртуальными машинами. Каждая запущенная виртуальная машина, привязанная к пулу зарезервированных ВМ, занимает один слот.

{% note info %}

Незанятые слоты пула зарезервированных ВМ расходуют [квоты](./limits.md#compute-quotas) на суммарное количество vCPU, GPU и суммарный объем виртуальной памяти ВМ, но не расходуют квоты на количество виртуальных машин в одном облаке.

{% endnote %}

Управлять пулами зарезервированных ВМ и привязкой к ним виртуальных машин вы можете с помощью [{{ yandex-cloud }} CLI](../cli-ref/reserved-instance-pool/index.md) и [API](../api-ref/ReservedInstancePool/index.md).

Пулы зарезервированных ВМ несовместимы с [выделенными хостами](./dedicated-host.md), [прерываемыми ВМ](./preemptible-vm.md) и виртуальными машинами с [уровнем производительности vCPU](./performance-levels.md) менее 100%. Кроме того, в настоящее время пулы зарезервированных ВМ не поддерживают [группы размещения](./placement-groups.md) и [группы виртуальных машин](./instance-groups/index.md).


## Создание пула {#creating-pool}

При [создании](../operations/reserved-pools/create-reserved-pool.md) пула зарезервированных ВМ для него задаются зона доступности, в которой будут резервироваться вычислительные ресурсы, и конфигурация виртуальных машин, входящих в пул.

Конфигурация виртуальных машин пула включает в себя следующие параметры:

* [платформа](./vm-platforms.md);
* количество [vCPU](./performance-levels.md);
* объем памяти (RAM);
* кластер и количество [GPU](./gpus.md);
* тип сети (обычная или [программно-ускоренная](./software-accelerated-network.md)).

Зона доступности и конфигурация ВМ задаются только при создании пула и не могут быть изменены позднее. 

## Привязка виртуальных машин к пулу {#attaching-vms}

Чтобы привязать виртуальную машину к пулу зарезервированных ВМ, передайте в ее настройки идентификатор нужного пула. Вы можете привязать виртуальную машину к пулу зарезервированных ВМ как при [создании](../operations/reserved-pools/manage-pool-vms.md#attach-new-vm) новой ВМ, так и при [изменении](../operations/reserved-pools/manage-pool-vms.md#attach-existing-vm) существующей.

При создании новой виртуальной машины в пуле зарезервированных ВМ эта виртуальная машина займет один из свободных слотов пула. При этом, если при создании новой ВМ в этом пуле нет свободных слотов, то создание ВМ завершится ошибкой. Чтобы это исправить, вы можете [увеличить](../operations/reserved-pools/update-reserved-pool.md) размер пула.

При привязке к пулу зарезервированных ВМ существующей виртуальной машины:
* если привязываемая ВМ остановлена, то такая привязка не повлияет на размер пула, а при запуске эта ВМ займет один из доступных слотов;
* если привязываемая ВМ запущена, то в результате привязки размер пула будет увеличен на один слот.

К пулу зарезервированных ВМ нельзя привязать виртуальную машину с конфигурацией, отличной от конфигурации, которая задана в настройках пула.

## Запуск и остановка виртуальных машин, привязанных к пулу {#stopping-vms}

Остановка виртуальной машины, привязанной к пулу зарезервированных ВМ, освобождает занимаемый этой виртуальной машиной слот, который может быть использован этой же или другой виртуальной машиной пула. При повторном запуске эта ВМ вновь займет один из доступных слотов.

Таким образом, остановленные ВМ не расходуют слоты пула зарезервированных ВМ. Поэтому количество виртуальных машин, привязанных к пулу, может превышать размер пула. При этом количество одновременно запущенных виртуальных машин пула не может превысить его размер (количество доступных слотов).

## Отвязка виртуальных машин от пула {#detaching-vms}

Вы можете [отвязать](../operations/reserved-pools/manage-pool-vms.md#detach-vm) виртуальную машину от пула зарезервированных ВМ: 
* если отвязываемая ВМ остановлена, то такая отвязка не повлияет на размер пула;
* если отвязываемая ВМ запущена, то в результате отвязки размер пула будет уменьшен на один слот.

## Удаление пула {#deleting-pool}

При [удалении](../operations/reserved-pools/delete-reserved-pool.md) пула зарезервированных ВМ все привязанные к пулу виртуальные машины будут от него отвязаны, а запущенные ВМ продолжат работать.

#### См. также {#see-also}

* [{#T}](../operations/reserved-pools/create-reserved-pool.md)
* [{#T}](../operations/reserved-pools/update-reserved-pool.md)
* [{#T}](../operations/reserved-pools/delete-reserved-pool.md)
* [{#T}](../operations/reserved-pools/manage-pool-vms.md)