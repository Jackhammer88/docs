---
description: OCR (Optical Character Recognition) – это оптическое распознавание текста. Сервис выделяет найденный текст на изображении и группирует его по уровням, где слова группируются в строки, строки в блоки, блоки в страницы. Для распознавания текста используется языковая модель, обученная на определенном наборе языков.
---

# О сервисе {{ vision-full-name }}

OCR (Optical Character Recognition) – это оптическое распознавание текста. Сервис компьютерного зрения {{ vision-full-name }} позволяет распознавать текст на изображениях и в файлах PDF.

{{ vision-name }} предоставляет свои возможности через API. Вы можете интегрировать функциональность сервиса в свое приложение, написанное на любом языке программирования, или отправлять запросы с помощью утилиты [cURL](https://curl.haxx.se) и ее аналогов. Сервис {{ vision-name }} предоставляет API в нотациях [REST](../../../glossary/rest-api.md) и [gRPC](../../../glossary/grpc.md). Вы можете самостоятельно сгенерировать интерфейс API для своего языка программирования на основе [спецификации API](https://github.com/yandex-cloud/cloudapi/tree/master/yandex/cloud/ai/ocr/v1).

## Режимы работы {{ vision-name }} {#modes}

{{ vision-name }} может обрабатывать запросы на распознавание изображений в синхронном и асинхронном режиме.

* В синхронном режиме сервис получит ваш запрос, сразу же обработает его и вернет результат в ответном сообщении. Такой режим  подходит для приложений, которым необходимо поддерживать диалог с пользователем. Однако в синхронном режиме {{ vision-name }} не может обработать большие объемы информации.
* В асинхронном режиме сервис получит запрос и сразу же вернет идентификатор операции, по которому позже вы сможете получить результат распознавания. Распознавание текста в асинхронном режиме займет больше времени, но позволит обработать большие объемы информации за один запрос. Асинхронный режим подойдет, если ваши задачи не требуют срочного ответа. 

## Модели распознавания {#models}

{{ vision-name }} предоставляет несколько моделей для распознавания разных типов текста на изображениях и в файлах PDF. Это может быть печатный текст, многоколоночный печатный текст, таблицы, рукописный текст или [шаблонные документы](template-recognition.md), например паспорт или регистрационный номер автомобиля. Чем точнее вы выберите модель, тем лучше будет результат распознавания. Модель передается в параметрах запроса в поле `model`.

Модели для распознавания текста:
  * `page` (по умолчанию) — подойдет для изображений с любым количеством строк текста, сверстанного в одну колонку.
  * `page-column-sort` — распознает многоколоночный текст.
  * `handwritten` — распознает произвольное сочетание печатного и рукописного текста на русском и английском языках.
  * `table` — подходит для распознавания таблиц на русском и английском языках.
  * `markdown` — распознает текст на изображениях и возвращает результаты в том числе в формате [Markdown](https://{{ lang }}.wikipedia.org/wiki/Markdown). Например, `'markdown': 'PENGUINS. CROSSING\nSLOW\n'`.
  * `math-markdown` — подойдет для распознавания математических формул. Модель возвращает распознанный текст в том числе в формате Markdown, при этом математические формулы будут обернуты в синтаксис LaTeX. Например, `'markdown': 'Important Algebraic Formulas\n\n$(a + b) ^ {2} = a ^ {2} + b ^ {2} + 2ab$'`.
  
{% include [models-templates](../../../_includes/vision/models-templates.md) %}

### Определение языковой модели {#detect-model}

Для распознавания текста {{ vision-name }} использует [языковые модели](supported-languages.md), обученные на определенном наборе языков. Большинство моделей выбирается автоматически на основе списка языков, который вы указываете в запросе. При каждом распознавании текста используется только одна модель. Например, если на изображении текст на китайском и японском, то распознан будет только один из этих языков. Чтобы распознать оба этих языка, отправьте запрос еще раз, указав другой язык распознавания.

Модели `handwritten` и `table` поддерживают только русский и английский язык. Чтобы использовать эти модели, явно укажите один или оба языка в свойстве `languageCodes` для [OCR API](../../ocr/api-ref/index.md).

Чтобы использовать модели для распознавания шаблонных документов, укажите язык нужной [страны](template-recognition.md#countries).

### Требования к изображению {#image-requirements}

Изображение в запросе должно соответствовать следующим требованиям:

{% include [file-restrictions](../../../_includes/vision/ocr-file-restrictions.md) %}

## Ответ с результатами распознавания {#response}

Сервис выделяет найденный текст на изображении и группирует его по уровням: слова группируются в строки, строки в блоки, блоки в страницы.

![image](../../../_assets/vision/text-detection.jpg)

В результате сервис возвращает объект, где для каждого из уровней дополнительно указывается:
* Страницы (`pages[]`) — размер страницы.
* Блоки текста (`blocks[]`) — расположение текста на странице. Имеют свойство *LayoutType*, которое принимает одно из значений:
  * `LAYOUT_TYPE_UNSPECIFIED` — не установлено;
  * `LAYOUT_TYPE_UNKNOWN` — не найдено;
  * `LAYOUT_TYPE_TEXT` — текст;
  * `LAYOUT_TYPE_HEADER` — заголовок;
  * `LAYOUT_TYPE_SECTION_HEADER` — заголовок раздела;
  * `LAYOUT_TYPE_FOOTER` — нижнее примечание;
  * `LAYOUT_TYPE_FOOTNOTE` — примечание;
  * `LAYOUT_TYPE_PICTURE` — текст на изображении;
  * `LAYOUT_TYPE_CAPTION` — подпись;
  * `LAYOUT_TYPE_TITLE` — название;
  * `LAYOUT_TYPE_LIST` — список.
* Строки (`lines[]`) — расположение строк.
* Слова (`words[]`) — расположение слов, текст и язык, использованный при распознавании.
* Изображения (`pictures[]`) — расположение изображений в документе.

Чтобы показать расположение текста, сервис возвращает координаты прямоугольника, обрамляющего текст. Координаты — количество пикселей от левого верхнего угла на изображении.

{% include [coordinates](../../../_includes/vision/coordinates.md) %}

Пример распознанного изображения с координатами:

{% include [text-detection-penguins](../../../_includes/vision/text-detection-example.md) %}

### Формат ответа {#response-format}

{{ vision-full-name }} предоставляет результат распознавания в формате [JSON Lines](https://jsonlines.org), где каждая строка JSON-файла соответствует одной распознанной странице или изображению.

### Ошибки в определении координат {#coordinate-definition-issue}

В некоторых случаях сервис возвращает координаты, которые не соответствуют отображению текста в пользовательском обработчике изображений. Это связано с некорректной обработкой метаданных `exif` обработчиком изображений пользователя.

При распознавании сервис учитывает данные о повороте изображения, которые задаются атрибутом `Orientation` секции `exif`. Некоторые средства просмотра изображений могут игнорировать заданные в `exif` значения поворота, что приводит к несоответствию полученных результатов отображаемому изображению.

Чтобы исправить эту ошибку, выполните одно из действий:

* Измените настройки обработчика изображений так, чтобы при просмотре учитывался заданный в секции `exif` угол поворота.
* При передаче в сервис удалите из секции `exif` изображения атрибут `Orientation`, либо установите для него значение `0`.

## Примеры использования {#examples}

* [{#T}](../../tutorials/archive-from-vision-to-object-storage.md)
* [{#T}](../../tutorials/recognizer-bot.md)
* [{#T}](../../operations/ocr/text-detection-image.md)
* [{#T}](../../operations/ocr/text-detection-pdf.md)
* [{#T}](../../operations/ocr/text-detection-handwritten.md)
* [{#T}](../../operations/ocr/text-detection-table.md)

#### Что дальше {#what-is-next}

* [Посмотрите список поддерживаемых языков](supported-languages.md).
* [Посмотрите известные ограничения в текущей версии](known-issues.md).
* [Попробуйте распознать текст на изображении](../../operations/ocr/text-detection-image.md).