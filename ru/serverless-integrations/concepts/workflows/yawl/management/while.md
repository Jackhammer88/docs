---
title: Управляющий шаг While
description: В статье описаны поля для управляющего шага While.
---

# While

Выполняет последовательность шагов, указанную в `do`, пока выполняется условие `condition` и количество итераций не превышает `max_iterations`. Результат выполнения — выходные данные последнего шага, для которого возможно задать значение поля `output`, последней итерации.

Каждая ветка выполнения внутри шага `while` (с учетом всех шагов [Switch](switch.md)) должна содержать [интеграционный шаг](../index.md#integration-steps) или шаг [Success](success.md), [Fail](fail.md) или [Wait](wait.md).

Имя поля | Тип | Обязательное | Значение по умолчанию | Поддерживается [шаблонизация](../../templating.md) | Описание
--- | --- | --- | --- | --- | ---
`input` | `string` | Нет | [Полное состояние рабочего процесса](../../workflow.md#state) | Да. Дополнительно доступна переменная `$counter`, которая равна номеру итерации (индексация начинается с нуля). | jq-выражение, фильтрующее состояние рабочего процесса, которое передается в шаг.
`output` | `string` | Нет | Выходные данные шага | Да | jq-выражение, фильтрующее выходные данные шага, которые добавляются в состояние рабочего процесса.
`do` | [WhileDo](#WhileDo) | Да | Нет | Нет | Последовательность шагов, которые будут выполнены над каждым элементом входных данных.
`condition` | `string` | Обязательно, если не указано `max_iterations` | Нет | Да. Дополнительно доступна переменная `$counter`, которая равна номеру итерации (индексация начинается с нуля). | Условие в формате jq, которое возвращает строку `true` или `false`.
`max_iterations` | `int` | Обязательно, если не указано `condition` | Нет | Да | Максимальное количество итераций, которое может совершить цикл. 
`next` | `string` | Нет | Нет | Нет | Идентификатор следующего шага.

## Объект WhileDo {#WhileDo}

Имя поля | Тип | Обязательное | Описание
--- | --- | --- | ---
`start` | `string` | Да | Идентификатор шага, с которого начнется выполнение.
`steps` | `map<string, Step>` | Да | Описание шагов. Объект, где ключ — идентификатор шага, значение — объект, который описывает параметры шага. Структура аналогична структуре поля `steps` [верхнего уровня спецификации](../index.md#workflow).
