---
title: Как удалить все копии ресурса
description: Следуя данной инструкции, вы сможете удалить все резервные копии виртуальной машины или сервера {{ baremetal-name }}.
---

# Удалить все резервные копии ВМ или сервера {{ baremetal-name }}

Если требуется удалить все резервные копии [виртуальной машины](../../../compute/concepts/vm.md) или [сервера {{ baremetal-name }}](../../../baremetal/concepts/servers.md), быстрее и эффективнее удалять эти резервные копии не по отдельности, а целым [архивом](../../concepts/backup.md#archives). Так вы сможете сэкономить время и избежать возможных ошибок.

Чтобы удалить архив резервных копий ВМ или сервера {{ baremetal-name }}:

{% list tabs group=instructions %}

- CLI {#cli}

  {% include [cli-install](../../../_includes/cli-install.md) %}

  {% include [default-catalogue](../../../_includes/default-catalogue.md) %}

  1. Посмотрите описание команды CLI для удаления архива резервных копий:

      ```bash
      yc backup backup batch-delete --help
      ```
  1. Получите список всех архивов резервных копий в каталоге по умолчанию:

      ```bash
      yc backup backup list-archives
      ```

      Результат:

      ```
      +--------------------------------------+-------------+----------------------+--------------------------------------------------------------------------------------+--------+---------------------+---------------------+------------------------+
      |                  ID                  | RESOURCE ID |     INSTANCE ID      |                                         NAME                                         |  SIZE  |     CREATED AT      |     UPDATED AT      | LAST BACKUP CREATED AT |
      +--------------------------------------+-------------+----------------------+--------------------------------------------------------------------------------------+--------+---------------------+---------------------+------------------------+
      | d8322308-fc11-833a-6b52-ca63******** |             | epd73glhmkr0******** | second-vm-579CFEB6-A557-4922-AACD-697FADED0529-40DC750F-057C-41FD-8AAE-D485A******** | 6.0 GB | 2025-03-02 15:33:44 | 0001-01-01 00:00:00 | 2025-03-02 16:07:13    |
      | 4508faa1-3372-542e-f73a-cccf******** |             | epdolbm6ijmt******** | backup-vm-579CFEB6-A557-4922-AACD-697FADED0529-86A93494-96F7-4168-A44C-0A969******** | 9.3 GB | 2025-03-02 14:13:46 | 0001-01-01 00:00:00 | 2025-03-02 16:07:16    |
      +--------------------------------------+-------------+----------------------+--------------------------------------------------------------------------------------+--------+---------------------+---------------------+------------------------+
      ```

      {% note info %}

      Вы можете запросить список архивов резервных копий для определенной ВМ или сервера {{ baremetal-name }}:

      ```bash
      yc backup backup list-archives --instance-id <идентификатор_ВМ_или_сервера_{{ baremetal-name }}>
      ```

      Но эта команда выведет результат только в том случае, если указанные ВМ или сервер не были удалены — то есть все еще существуют и подключены к {{ backup-name }}.

      {% endnote %}

  1. Удалите архив резервных копий:

      * Вы можете удалить архив, указав его идентификатор:

          ```bash
          yc backup backup batch-delete \
            --archive-id <идентификатор_архива>
          ```

          Где `--archive-id` — идентификатор [архива резервных копий](../../concepts/backup.md#archives), который требуется удалить.

      * Вы можете удалить архив, указав идентификаторы ВМ/сервера и политики резервного копирования:

          ```bash
          yc backup backup batch-delete \
            --instance-id <идентификатор_ВМ_или_сервера_{{ baremetal-name }}> \
            --policy-id <идентификатор_политики>
          ```

          Где:
          * `--instance-id` — идентификатор виртуальной машины или сервера {{ baremetal-name }}, резервные копии которых требуется удалить. При использовании параметра `--instance-id` обязательно также указывать параметр `--policy-id`.
          * `--policy-id` — идентификатор [политики резервного копирования](../../concepts/policy.md), в соответствии с которой были созданы удаляемые резервные копии. При использовании параметра `--policy-id` обязательно также указывать параметр `--instance-id`.

{% endlist %}

В результате удаления архива будут удалены все резервные копии виртуальной машины или сервера {{ baremetal-name }}, хранящиеся в этом архиве.

{% note info %}

Если резервные копии для виртуальной машины или сервера {{ baremetal-name }} создавались в соответствии с несколькими разными политиками резервного копирования, необходимо удалить также и другие архивы ВМ/сервера, созданные в соответствии такими политиками.

{% endnote %}

#### См. также {#see-also}

* [{#T}](./delete.md)