# Push-уведомления в {{ cns-full-name }}

_Push-уведомления в браузере_ — это сообщения, всплывающие в браузере.

Push-уведомления могут сообщать о новом контенте, специальных предложениях и других значимых событиях. Браузерные уведомления будут работать на разных платформах: на настольных компьютерах, смартфонах и планшетах с любой операционной системой. Чтобы получать уведомления, пользователю не требуется ставить определенное ПО, достаточно стандартного браузера на его устройстве.

Push-уведомления также поддерживаются в прогрессивных веб-приложениях — [PWA](https://ru.wikipedia.org/wiki/Прогрессивное_веб-приложение). PWA — веб-приложение, которое работает в браузере, но сохраняет функции мобильного приложения. Например, PWA может работать офлайн, но при этом не потребуется скачивать обновления — они выполняются на стороне сервера.

Чтобы уведомление отправлялось в браузер по защищенному каналу, пользователь должен подписаться на уведомления через сервер уведомлений, который используется его браузером. Затем в канале уведомления {{ cns-short-name }} надо создать эндпоинт для этого пользователя.

{% include [limits-warning](../../_includes/notifications/limits-warning.md) %}

Порядок настройки Push-уведомлений:

1. В сервисе {{ cns-short-name }} создайте канал **{{ ui-key.yacloud.cns.type_web }}**.
1. Из браузера пользователя с помощью [Service Worker](https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers) вызовите метод JavaScript [subscribe](https://developer.mozilla.org/en-US/docs/Web/API/PushManager/subscribe#applications).

   При вызове метода браузер отправляет запрос на свой сервер отправки уведомлений. Например, Google Chrome отправляет запрос на Firebase Cloud Messaging (FCM), Safari — на Apple Push Notification Service (APNs). В ответ вернется объект [PushSubscription](https://developer.mozilla.org/en-US/docs/Web/API/PushSubscription).

1. Преобразуйте полученный объект в JSON, вызвав метод [toJSON](https://developer.mozilla.org/en-US/docs/Web/API/PushSubscription/toJSON).

1. Используйте полученный JSON при создании эндпоинта. Через этот эндпоинт пользователю будут отправляться уведомления.

1. Чтобы отправить уведомление, создайте сообщение в {{ cns-short-name }} и укажите в качестве получателя идентификатор (ARN) эндпоинта.

Чтобы отправлять уведомления разным пользователям, создайте базу эндпоинтов для всех пользователей.

Порядок отправки push-уведомлений:

1. Ваше веб-приложение инициирует отправку уведомления через канал push-уведомлений в браузере.
1. Команда на отправку поступает в {{ cns-short-name }}.
1. {{ cns-short-name }} отправляет уведомления на серверы, заданные в эндпоинтах.
1. Серверы уведомлений (FCM, APNs) отправляют уведомления в браузеры пользователей.

Работа с push-уведомлениями в браузере аналогична работе с мобильными push-уведомлениями.

#### См. также {#see-also}

* [Обзор сервиса](index.md)
* [Как начать работать с push-уведомлениями](../quickstart-push.md)
* [Как начать работать с сервисом с помощью AWS CLI](../tools/aws-cli.md)
* [SMS](sms.md)