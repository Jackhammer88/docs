---
title: Инструкция по созданию подключения к {{ GP }} в {{ datalens-full-name }}
description: Из статьи вы узнаете, как подключиться к {{ GP }} в {{ datalens-full-name }}.
---

# Создание подключения к {{ GP }}



{% note warning %}

{% include [connection-note](../../../_includes/datalens/datalens-connection-note.md) %}

{% endnote %}


Чтобы создать подключение к {{ GP }}:

1. Перейдите на [страницу создания нового подключения]({{ link-datalens-main }}/connections/new).
1. В разделе **Базы данных** выберите подключение **Greenplum**.


1. Выберите тип подключения:

   {% list tabs group=connection %}

   - Выбрать в организации {#organization}

     {% include [datalens-db-select](../../../_includes/datalens/datalens-db-select.md) %}

     * **Облако и каталог**. Выберите каталог, в котором находится кластер.
     * **Кластер**. Укажите кластер из списка доступных кластеров {{ GP }}. В настройках кластера должна быть активирована опция **Доступ из {{ datalens-short-name }}**. Если у вас нет доступного кластера, нажмите кнопку **Создать новый**.

       {% include [datalens-cluster-list](../../../_includes/datalens/datalens-cluster-list.md) %}

     * **Тип хоста**. Выберите тип хоста:
       
       * **Обычный** (по умолчанию) — позволяет выбрать обычные хосты для подключения.
       * **Особые FQDN**  — позволяет выбрать для подключения [особый FQDN](../../../managed-greenplum/operations/connect.md#fqdn-master), который всегда указывает на первичный хост-мастер {{ GP }}.

     * **Имя хоста**. Выберите имя хоста из списка доступных в кластере {{ GP }}. Вы можете выбрать несколько хостов. Если к первому хосту подключиться не получится, {{ datalens-short-name }} выберет следующий из списка.
     * **Порт**. Укажите порт подключения к {{ GP }}. Порт по умолчанию — {{ port-mgp }}.
     * **Путь к базе данных**. Укажите имя подключаемой базы данных.
     * **Имя пользователя**. Укажите имя пользователя для подключения к {{ GP }}.
     * **Пароль**. Укажите пароль для пользователя.
     * **Время жизни кеша в секундах**. Укажите время жизни кеша или оставьте значение по умолчанию. Рекомендованное значение — 300 секунд (5 минут).
     * **Уровень доступа SQL запросов**. Позволяет использовать произвольный SQL-запрос для [формирования датасета](../../dataset/settings.md#sql-request-in-datatset).

   - Указать вручную {#manual}

     {% include [datalens-db-specify-mannualy](../../../_includes/datalens/datalens-db-specify-mannualy.md) %}

      * **Имя хоста**. Укажите путь до хоста-мастера или IP-адрес хоста-мастера {{ GP }}. Вы можете указать несколько хостов через запятую. Если к первому хосту подключиться не получится, {{ datalens-short-name }} выберет следующий из списка.
      * **Порт**. Укажите порт подключения к {{ GP }}. Порт по умолчанию — 5432.
      * **Путь к базе данных**. Укажите имя подключаемой базы данных.
      * **Имя пользователя**. Укажите имя пользователя для подключения к {{ GP }}.
      * **Пароль**. Укажите пароль для пользователя.
      * **Время жизни кеша в секундах**. Укажите время жизни кеша или оставьте значение по умолчанию. Рекомендованное значение — 300 секунд (5 минут).
      * **Уровень доступа SQL запросов**. Позволяет использовать произвольный SQL-запрос для [формирования датасета](../../dataset/settings.md#sql-request-in-datatset).

      ![image](../../../_assets/datalens/operations/connection/connection-greenplum.png)

   {% endlist %}


1. (опционально) Проверьте работоспособность подключения. Для этого нажмите кнопку **Проверить подключение**.
1. Нажмите кнопку **Создать подключение**.


1. Выберите [воркбук](../../workbooks-collections/index.md), в котором сохранится подключение, или создайте новый. Если вы пользуетесь старой навигацией по папкам, выберите папку для сохранения подключения. Нажмите кнопку **Создать**.


1. Укажите название подключения и нажмите кнопку **Создать**.



## Дополнительные настройки {#additional-settings}

Вы можете указать дополнительные параметры подключения в разделе **Продвинутые настройки подключения**:

* **Указание collate в запросе** — если в запросах к БД требуется явно задать правило сортировки, выберите один из режимов:

  * **Авто** — применяется настройка по умолчанию, решение о включении локали `en_US` остается на усмотрение {{ datalens-short-name }}.
  * **Вкл** — применяется настройка {{ datalens-short-name }}, для отдельных выражений в запросе указывается локаль `en_US`. Это приводит к использованию соответствующей логики сортировки сервером, вне зависимости от настроек сервера и конкретных таблиц. Используйте настройку {{ datalens-short-name }}, если локаль в БД несовместима с работой {{ datalens-short-name }}. Подробнее о локали и `LC_COLLATE` смотрите в разделе [{#T}](../../../managed-postgresql/operations/cluster-create.md#create-cluster).
  * **Выкл** — применяется настройка по умолчанию, {{ datalens-short-name }} использует только имеющиеся параметры локали БД.

* {% include [datalens-db-connection-export-settings-item](../../../_includes/datalens/operations/datalens-db-connection-export-settings-item.md) %}

