## 02.04.2025 — CVE-2025-1385 Удаленное выполнение кода ClickHouse Library Bridge {#CVE-2025-1385}

Идентификатор CVE (CVE ID): CVE-2025-1385

Ссылка на CVE: <https://nvd.nist.gov/vuln/detail/CVE-2025-1385>

### Исходный отчёт {#original-report}

<https://github.com/ClickHouse/ClickHouse/security/advisories/GHSA-5phv-x8x4-83x5>

### Краткое описание {#brief-description}

Вследствие уязвимости ClickHouse стало возможным удаленное выполнение кода при включенной функции Library Bridge. Функция `clickhouse-library-bridge` открывала HTTP API на `localhost`, что позволяло `clickhouse-server` динамически загружать библиотеку из определенного пути и выполнять ее в изолированном процессе. В сочетании с табличным движком ClickHouse, разрешающим загрузку файлов в определенные директории, сервер с проблемной конфигурацией могли эксплуатировать злоумышленники, имеющие доступ к табличным движкам для выполнения произвольного кода на сервере ClickHouse.

### Затронутые технологии {#technologies-affected}

ClickHouse

### Уязвимые продукты и версии {#vulnerable-products-and-versions}

* ClickHouse версии ниже 24.3.18.6

* ClickHouse версии ниже 24.8.14.27

* ClickHouse версии ниже 24.11.5.34

* ClickHouse версии ниже 24.12.5.65

* ClickHouse версии ниже 25.1.5.5

### Раработчик {#vendor}

ClickHouse, Inc.

### Вектор атаки и уровень опасности согласно CVSS v.3.0 {#attack-vector-and-severity-level}

Не назначено.

### Рекомендации по обнаружению уязвимости и дополнительные материалы {#recommendations-for-vulnerability-detection}

Проверить, подвержен ли ваш сервер ClickHouse данной уязвимости, можно, изучив файл конфигурации и убедившись, что следующая настройка включена:

```
<library_bridge>
   <port>9019</port>
</library_bridge>
```

### Безопасная версия уязвимого продукта или патч {#safe-version}

Уязвимость устранена в следующих версиях:

 * 24.3.18.6

 * 24.8.14.27

 * 24.11.5.34

 * 24.12.5.65

 * 25.1.5.5
 
### Влияние на сервисы {{ yandex-cloud }} {#impact-on-yandex-cloud-services}
 
Сервис {{ mch-full-name }} обновлен до версий с устраненной уязвимостью. Действий со стороны пользователя не требуется.

При использовании ClickHouse на собственных ВМ в {{ yandex-cloud }} дополнительных действий со стороны конечного пользователя не требуется, поскольку уязвимость уже устранена в новой версии образов. 
